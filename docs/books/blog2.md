

## 《写代码卡住怎么办》


在我使用cocos进行编程的时候
我有思路，但是一开始就卡住不知该如何开始

比如写一个简单的监听，我就不记得怎么写的了

再就是对于编程对象的理解，我要改的到底是个什么玩意，我的代码逻辑的作用对象到底是谁？，在cocos里面，引擎的基础对象，就是node，还有node的组件，node下面的子node，node上面的父node。

修改node的scale，position这些，也可以修改Rigibody2D，本质上也只是让组件帮助我完成一些工作。

然后也是一些逻辑上的修改，处理什么呢，去拿弹窗的引用，比如训练界面的一个纸片人，点击之后，就要去拿到弹窗的调用脚本，把自己是谁传入进去，然后调用弹窗的方法。

弹窗的什么方法？也就是active的false和true，用这个来控制显示，也可以使用层级，调到下面看不见。
弹窗里面又有什么，一个是它自己本来要显示的东西。
它又要和外部进行交互，比如就要拿到数据系统的操控权，能够根据玩家行为，去对数据系统进行接口的调用，增加经验值，等级，换装备

换装备又要弹窗，查询到装备，点击上去，然后又要返回给这个弹窗系统，麻烦得很。还得慢慢做。

系统不是独立的系统，每个系统都有它自己需要的外部联系，做一个系统，仅仅只是把它的UI表现做出来吗，不够，还有它的UI所需要的外部系统的接口，这个是很重要的。
不能分得太散，也不能弄成一坨。总要看的清楚，分的明白，还能写得下去，不然项目就没法做下去了。

所以不同的系统之间如何进行通信呢，选用全局单例进行信息传递，这个可以，注意信息的规范性。

还有用到的属性检查器，把一个按钮拖进去，就能用。
还有就是代码里面的引用，把这个代码导入进去，如果系统不是单例就不能用，如果系统不是附属关系也不能用。

原来如此，我之前一直在做单独的系统，main场景的，train场景的是分开做的，所以系统之间的协作关系还没体现出来。
但是当多系统之间需要协作的时候，这种困难就表现出来了。
我使用的是数据驱动结构，a系统把数据改了，b系统读取的时候自然就知道，他们两个之间并没有什么直接的通信协作关系。

但是，人物培养界面，他就有它自己的子弹窗，甚至子弹窗还有子弹窗，弹窗的层级很多，就需要一个专门的管理系统。

不同的场景里面，该怎么构造出不同的游戏系统？
不同的场景里面，所需要的系统也是不一样的。

使用空节点+逻辑代码--添加控制节点的方式构建场景。

场景里面到底需要些什么东西。多个逻辑系统，这个每个场景的大脑。
多个功能节点，label，sprite，这是每个场景需要操控的东西

还有一部分的高级节点，自带逻辑的节点。

游戏编程，抽象点说就是什么？节点控制节点。
最简单的，没有逻辑不用被控制的节点，场景的背景，只受到场景切换的影响
只有自己独立逻辑的节点，一颗子弹，射出去，由物理系统接管，发生什么碰撞逻辑，设计者都不用管。
再复杂点，作者自己设计的逻辑节点。
一个纸片人，拥有自己的攻击，特效，受击逻辑，这个和不是单纯物理系统，所以还要给他们设置一个系统，来管理这些拥有自己逻辑的节点。
一个战斗系统，使用纸片人预制体，存储他们的引用，然后来对他们进行控制。

系统不能没有边界，不然这个系统就难以使用，这个系统要有明确的输入接口，指明输入一些什么，就能够控制它。一个系统需要能够被封装，这样才能既满足复杂的功能需求，又能达到系统间相互合作的目的，不然，一盘散沙，谁也不知道该如何去使用他们。

系统内的组织，一个纸片人，是一个简单的系统，它具有自己的节点，自己的组件，自己的代码逻辑，清楚地定义了对外的接口。把它做成了一个预制体。

战斗系统，把一个系统分成几部分，第一部分用来做预处理，引用池管理，提取多个预制体，接受输入的数据，第二部分生成战斗九宫格，九宫格也是节点，只是没有自己的逻辑。，第三部分就综合前两个部分，把人物分派到它自己的格子上，存储它的引用。
这样一看起来，一切就完备了。
人物的战斗，人物的战斗需要知道我方的数据，对方的数据，还要知道对方是谁？
所以这个战斗系统又需要一个管理系统，能够给角色提供查询，告诉他你该攻击谁，告诉被攻击的，你被攻击了。
这个系统做起来不容易，为什么？
因为一开始，谁也不知道到底还需要那些系统，人物还没有定型，这个该怎么做，那个改怎么做。
这样做起来像无头苍蝇，满屋子乱飞，做到哪里算哪里，这样太慢，太没效率。
需要用工程化的方法。怎么做？先定好大致规范，把大概的系统划分出来，然后再去填补，不然，按照这种不断撞墙开路的方式，天知道到底要重构多少次？写代码少了，大多数时间都用到想代码去了。如果一开始就能划分好的话，做起来就容易多了。

所以该怎么做呢？在一开始，就应该要对多个系统进行一个梳理，大概明白，到底需要些什么系统，这个叫做，工程计划书。

工程计划书也不是完全固定的，绝对也会有不合理的地方，也会需要重构，重写，但是这比起一开始就完全没有还是要好太多了。
好，想到了办法，那就开始实行试试看吧。